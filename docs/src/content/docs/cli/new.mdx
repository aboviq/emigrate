---
title: "`emigrate new`"
description: "Create new migration."
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import Link from '@components/Link.astro';
import { standardPrefixOptions } from "@emigrate/prefixes";

The `new` command is used to create a new migration file in the given directory.

The migration file can be based on a template file, a <Link href="/plugins/templates/">template plugin</Link>, or just be an empty file.

## Usage

<Tabs>
  <TabItem label="npm">
    ```bash
    npx emigrate new [options] <name>
    ```
  </TabItem>
  <TabItem label="pnpm">
    ```bash
    pnpm emigrate new [options] <name>
    ```
  </TabItem>
  <TabItem label="yarn">
    ```bash
    yarn emigrate new [options] <name>
    ```
  </TabItem>
  <TabItem label="bun">
    ```bash
    bunx --bun emigrate new [options] <name>
    ```
  </TabItem>
  <TabItem label="deno">
    ```json title="package.json" {3,6}
    {
      "scripts": {
        "emigrate": "emigrate"
      },
      "dependencies": {
        "@emigrate/cli": "*"
      }
    }
    ```

    ```bash
    deno task emigrate new [options] <name>
    ```
  </TabItem>
</Tabs>

## Arguments

### `<name>`

The name of the migration. The name will be used to generate the migration filename.

The name can be provided as a single argument or as multiple arguments.
If multiple arguments are provided, the arguments will be joined with a space before being passed to the filename generator (the default filename generator replaces all whitespace and non-path safe characters with underscores).

## Options

### `-h`, `--help`

Show command help and exit

### `-d`, `--directory <path>`

The directory where the migration files are located. The given path should be absolute or relative to the current working directory.

### `-t`, `--template <path>`

The template file to use for generating the migration file. The given path should be absolute or relative to the current working directory.

The template can contain a `{{name}}` placeholder which will be replaced with the migration name provided to the command. The generated file will have the same extension as the template file, unless the [`--extension`](#-e---extension-ext) option is used.

### `-x`, `--prefix <name>`

**type:** <code>"{standardPrefixOptions.join('" | "')}"</code>  
**default:** `timestamp`

The type of prefix to use for the new migration file.

If you want a custom prefix function you can specify that in your configuration file using the <Link href="/reference/configuration/#prefix">`prefix`</Link> option.

### `-e`, `--extension <ext>`

**type:** `string`  
**default:** `.js`

The extension to use for the migration file. Unless the [`--template`](#-t---template-path) option is also specified the file will be empty.

If both the `--template` and `--extension` options are specified, the extension will override the template file extension.

**Example:** `--extension .sql` will generate a file with the `.sql` extension.

### `-j`, `--joiner <string>`

**type:** `string`  
**default:** `_`

The string to use to join the prefix and the name of the migration file.  
It's also used for replacing whitespace and characters that are not allowed in filenames in the name.

### `-p`, `--plugin <name>`

<Link href="/plugins/templates/">Template plugins</Link> to use. A template plugin can generate the contents for the new migration file depending on the chosen extension (default file extension is `.js`).

The name can be either a path to a module or a package name. For package names Emigrate will automatically prefix the given name with these prefixes in order:

- `@emigrate/plugin-`
- `emigrate-plugin-`
- `@emigrate/`

And then try to load the module/package with the given name.

For example, if you want to use the `emigrate-plugin-someplugin` package, you can specify either `emigrate-plugin-someplugin` or just `someplugin` as the name.
In case you have both a `emigrate-plugin-someplugin` and a `someplugin` package installed, the `emigrate-plugin-someplugin` package will be used.

### `-r`, `--reporter <name>`

**type:** `"pretty" | "json" | string`  
**default:** `"pretty"`

The <Link href="/plugins/reporters/">reporter</Link> to use for listing the migrations.

The name can be either a path to a module or a package name. For package names Emigrate will automatically prefix the given name with these prefixes in order:

- `@emigrate/reporter-`
- `emigrate-reporter-`
- `@emigrate/`

And then try to load the module/package with the given name.

For example, if you want to use the `emigrate-reporter-somereporter` package, you can specify either `emigrate-reporter-somereporter` or just `somereporter` as the name.

### `--color`, `--no-color`

Force enable/disable colored output, option is passed to the reporter which should respect it.
